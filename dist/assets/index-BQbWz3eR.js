import{r as x,a as w,c as k,C as S,A as g,b as j,L as _,R,W as C,d as L,e as O,f as A,g as D,X as P,T as E,h as $,P as z,i as T}from"./vendor-ExBI71j7.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function d(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(s){if(s.ep)return;s.ep=!0;const a=d(s);fetch(s.href,a)}})();var y={exports:{}},m={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F=x,I=Symbol.for("react.element"),U=Symbol.for("react.fragment"),q=Object.prototype.hasOwnProperty,J=F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,K={key:!0,ref:!0,__self:!0,__source:!0};function v(o,r,d){var l,s={},a=null,i=null;d!==void 0&&(a=""+d),r.key!==void 0&&(a=""+r.key),r.ref!==void 0&&(i=r.ref);for(l in r)q.call(r,l)&&!K.hasOwnProperty(l)&&(s[l]=r[l]);if(o&&o.defaultProps)for(l in r=o.defaultProps,r)s[l]===void 0&&(s[l]=r[l]);return{$$typeof:I,type:o,key:a,ref:i,props:s,_owner:J.current}}m.Fragment=U;m.jsx=v;m.jsxs=v;y.exports=m;var e=y.exports,h={},b=w;h.createRoot=b.createRoot,h.hydrateRoot=b.hydrateRoot;const B="https://pjxixiydproeuoosljbr.supabase.co",M="sb_publishable_YqZnovpi6Jp1oueQOJ-HiQ_YJRaE8Fq",N=k(B,M);function W({onRefresh:o}){const[r,d]=x.useState(""),[l,s]=x.useState("credit"),[a,i]=x.useState("AFN"),[u,t]=x.useState(!1),p=async c=>{if(c.preventDefault(),!r||Number(r)<=0)return;t(!0);const{error:n}=await N.from("transactions").insert([{amount:Number(r),type:l,currency_code:a}]);n||(d(""),o()),t(!1)};return e.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-xl border border-slate-50 transition-all hover:shadow-2xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"bg-blue-600 p-2.5 rounded-2xl text-white shadow-lg shadow-blue-200",children:e.jsx(S,{size:22})}),e.jsx("h3",{className:"text-xl font-black text-slate-800",children:"عملیات مالی سریع"})]}),e.jsxs("form",{onSubmit:p,className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mr-2",children:"مبلغ (AFN/USD/IRT)"}),e.jsx("input",{type:"number",placeholder:"0.00",value:r,onChange:c=>d(c.target.value),className:"w-full bg-slate-50 border-2 border-transparent p-4 rounded-2xl outline-none focus:border-blue-500 focus:bg-white transition-all text-xl font-black text-slate-700",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest text-center block",children:"واحد ارز"}),e.jsx("div",{className:"flex bg-slate-50 p-1.5 rounded-2xl gap-1",children:["AFN","USD","IRT"].map(c=>e.jsx("button",{type:"button",onClick:()=>i(c),className:`flex-1 py-3 rounded-xl font-bold text-sm transition-all ${a===c?"bg-white text-blue-600 shadow-sm":"text-slate-400"}`,children:c},c))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest text-center block",children:"نوع تراکنش"}),e.jsxs("div",{className:"flex bg-slate-50 p-1.5 rounded-2xl gap-1",children:[e.jsxs("button",{type:"button",onClick:()=>s("credit"),className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl font-bold text-sm transition-all ${l==="credit"?"bg-white text-green-600 shadow-sm":"text-slate-400"}`,children:[e.jsx(g,{size:16})," واریز"]}),e.jsxs("button",{type:"button",onClick:()=>s("debit"),className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl font-bold text-sm transition-all ${l==="debit"?"bg-white text-red-600 shadow-sm":"text-slate-400"}`,children:[e.jsx(j,{size:16})," برداشت"]})]})]})]}),e.jsx("button",{type:"submit",disabled:u,className:"w-full bg-slate-900 hover:bg-blue-600 text-white font-black py-5 rounded-2xl shadow-xl transition-all active:scale-95 flex items-center justify-center gap-3",children:u?e.jsx(_,{className:"animate-spin",size:22}):"تایید و ثبت در سیستم"})]})]})}function Y(){const[o,r]=x.useState([]),[d,l]=x.useState(!0),s=async()=>{l(!0);const{data:t}=await N.from("transactions").select("*").order("created_at",{ascending:!1});t&&r(t),l(!1)};x.useEffect(()=>{s()},[]);const a=t=>{const p=o.filter(n=>n.type==="credit"&&n.currency_code===t).reduce((n,f)=>n+f.amount,0),c=o.filter(n=>n.type==="debit"&&n.currency_code===t).reduce((n,f)=>n+f.amount,0);return p-c},i=t=>{const p=window.open("","_blank");p==null||p.document.write(`
      <div style="font-family: sans-serif; padding: 30px; border: 2px dashed #000; width: 280px; text-align: center;">
        <h2 style="margin: 0; color: #2563eb;">Fortress Core Pro</h2>
        <p style="font-size: 12px; color: #666;">رسید رسمی تراکنش صرافی</p>
        <hr/>
        <div style="text-align: right; font-size: 14px;">
          <p><strong>آیدی:</strong> #${t.id.slice(0,8)}</p>
          <p><strong>نوع:</strong> ${t.type==="credit"?"واریز":"برداشت"}</p>
          <p><strong>مبلغ:</strong> ${t.amount.toLocaleString()} ${t.currency_code}</p>
          <p><strong>تاریخ:</strong> ${new Date(t.created_at).toLocaleDateString("fa-AF")}</p>
        </div>
        <hr/>
        <p style="font-size: 10px;">سیستم مدیریت صرافی هوشمند</p>
        <script>window.print(); window.close();<\/script>
      </div>
    `)},u=[...o].reverse().slice(-8).map(t=>({name:new Date(t.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),amount:t.amount}));return e.jsx("div",{className:"min-h-screen bg-[#f8fafc] p-4 md:p-10 font-sans",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("header",{className:"flex justify-between items-center mb-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-2xl flex items-center justify-center text-white font-black text-xl shadow-lg shadow-blue-200",children:"F"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-black text-slate-800",children:["Fortress Core ",e.jsx("span",{className:"text-blue-600",children:"Pro"})]}),e.jsx("p",{className:"text-slate-400 text-[10px] font-bold uppercase tracking-widest",children:"Saraf Digital System"})]})]}),e.jsx("button",{onClick:s,className:"p-3 bg-white rounded-xl border border-slate-100 shadow-sm hover:rotate-180 transition-all duration-500",children:e.jsx(R,{size:20,className:"text-blue-600"})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-10",children:[{label:"موجودی افغانی",code:"AFN",color:"from-blue-600 to-blue-700"},{label:"موجودی دلار",code:"USD",color:"from-emerald-500 to-emerald-600"},{label:"موجودی تومان",code:"IRT",color:"from-amber-500 to-amber-600"}].map(t=>e.jsxs("div",{className:`bg-gradient-to-br ${t.color} p-8 rounded-[2.5rem] text-white shadow-xl relative overflow-hidden group`,children:[e.jsx(C,{className:"absolute right-[-20px] bottom-[-20px] w-40 h-40 opacity-10"}),e.jsx("p",{className:"text-white/70 text-xs font-bold mb-2 uppercase tracking-widest",children:t.label}),e.jsxs("h2",{className:"text-4xl font-black",children:[a(t.code).toLocaleString()," ",e.jsx("span",{className:"text-lg font-medium opacity-60",children:t.code})]})]},t.code))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[e.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-sm border border-slate-50",children:[e.jsxs("h3",{className:"font-black text-slate-800 flex items-center gap-2 mb-8",children:[e.jsx(L,{size:18,className:"text-blue-600"})," نوسانات سرمایه"]}),e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(A,{data:u,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorP",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#2563eb",stopOpacity:.1}),e.jsx("stop",{offset:"95%",stopColor:"#2563eb",stopOpacity:0})]})}),e.jsx(D,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),e.jsx(P,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"#94a3b8"}}),e.jsx(E,{contentStyle:{borderRadius:"20px",border:"none",boxShadow:"0 10px 15px -3px rgb(0 0 0 / 0.1)"}}),e.jsx($,{type:"monotone",dataKey:"amount",stroke:"#2563eb",strokeWidth:4,fill:"url(#colorP)"})]})})})]}),e.jsx(W,{onRefresh:s})]}),e.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-sm border border-slate-50 overflow-hidden h-fit",children:[e.jsx("div",{className:"p-8 border-b border-slate-50 bg-slate-50/30 font-black text-slate-800",children:"تاریخچه هوشمند"}),e.jsx("div",{className:"p-4 space-y-2 max-h-[700px] overflow-y-auto",children:o.map(t=>e.jsxs("div",{className:"group flex justify-between items-center p-4 rounded-3xl hover:bg-slate-50 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-3 rounded-2xl ${t.type==="credit"?"bg-green-50 text-green-600":"bg-red-50 text-red-600"}`,children:t.type==="credit"?e.jsx(g,{size:18}):e.jsx(j,{size:18})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-[10px] font-mono text-slate-300",children:["#",t.id.slice(0,6)]}),e.jsx("p",{className:"text-xs font-black text-slate-700 uppercase",children:t.currency_code})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-right",children:[e.jsxs("div",{children:[e.jsxs("p",{className:`font-black text-sm ${t.type==="credit"?"text-green-600":"text-slate-800"}`,children:[t.type==="credit"?"+":"-",t.amount.toLocaleString()]}),e.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"COMPLETED"})]}),e.jsx("button",{onClick:()=>i(t),className:"p-2 text-slate-300 hover:text-blue-600 hover:bg-blue-50 rounded-xl transition-all opacity-0 group-hover:opacity-100",children:e.jsx(z,{size:16})})]})]},t.id))})]})]})]})})}function G(){return e.jsx(Y,{})}h.createRoot(document.getElementById("root")).render(e.jsx(T.StrictMode,{children:e.jsx(G,{})}));
